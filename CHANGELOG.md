# Changelog

Все значимые изменения в проекте RexTube будут документированы в этом файле.

Формат основан на [Keep a Changelog](https://keepachangelog.com/ru/1.0.0/),
и этот проект придерживается [Semantic Versioning](https://semver.org/lang/ru/).

## [Unreleased]

### Добавлено
- Система чата с polling механизмом
- Виджет чата на страницах видео и live стримов
- Админ-панель для управления чатом
- Тесты для сервиса чата (4 теста)

## [1.5.0] - 2026-02-08

### Добавлено
- **Система чата**: Реализован функционал чата с поддержкой комнат
  - API endpoints для отправки и получения сообщений
  - Stimulus контроллер с автоматическим обновлением (polling каждые 3 секунды)
  - Виджет чата для интеграции на страницы
  - Админ-панель для модерации сообщений
  - Возможность удаления сообщений пользователями и админами
  - Автоматическая очистка старых сообщений
- **Система ролей и разрешений**: Инициализация базовых ролей и разрешений
  - 7 базовых ролей: super_admin, admin, moderator, content_manager, creator, premium, user
  - 65 разрешений для всех модулей системы
  - Автоматическая инициализация при развертывании
- **Live Streaming**: Улучшения функционала стриминга
  - Исправлена работа кнопок управления стримом (Start/End/Regenerate Key)
  - Добавлен чат для live стримов
  - Улучшен интерфейс управления стримами

### Изменено
- Унифицировано оформление страниц админ-панели
- Добавлены SVG иконки к заголовкам всех страниц админки
- Улучшена структура меню админ-панели
- Обновлены стили форм и таблиц в админке

### Исправлено
- Исправлена работа кнопки "Start Stream" в управлении стримами
- Исправлены дублирующиеся ключи в файлах переводов
- Исправлены тесты чата (проблема с дублированием пользователя)

## [1.4.0] - 2026-02-07

### Добавлено
- **SEO настройки**: Расширены возможности SEO оптимизации
  - Мета-теги для страниц /posts, /channels, /live
  - Вкладки в админ-панели для управления SEO настройками
  - Автоматический вывод мета-тегов в шаблонах
- **Система уведомлений**: Улучшения функционала уведомлений
  - Расширенные типы уведомлений
  - Улучшенный интерфейс просмотра уведомлений

### Изменено
- Обновлены контроллеры для передачи SEO данных в шаблоны
- Улучшена структура шаблонов постов, каналов и live стримов

## [1.3.0] - 2026-02-06

### Добавлено
- **Система разрешений**: Полная реализация RBAC
  - Управление ролями и разрешениями в админ-панели
  - Привязка разрешений к ролям
  - Проверка разрешений для пользователей
- **Workflow система**: Управление рабочими процессами
  - Настройка workflow для различных сущностей
  - Отслеживание статусов и переходов

### Изменено
- Улучшена структура базы данных для ролей и разрешений
- Оптимизированы запросы к базе данных

## [1.2.0] - 2026-02-02

### Добавлено
- **Система постов**: Функционал публикаций
  - Создание и редактирование постов
  - Категории постов
  - Rich-text редактор для контента
- **Улучшения админ-панели**:
  - Новый дизайн списков с фильтрами
  - Bulk actions для массовых операций
  - Улучшенная пагинация

### Изменено
- Обновлен дизайн админ-панели
- Улучшена навигация в админке

## [1.1.0] - 2026-01-24

### Добавлено
- **Система рекламы**: Полнофункциональная рекламная платформа
  - Управление рекламными кампаниями
  - Размещения (placements) для разных позиций на сайте
  - Сегментация аудитории
  - A/B тестирование рекламы
  - Статистика и аналитика
- **Планировщик задач**: Система для запуска задач по расписанию

### Изменено
- Оптимизирована загрузка рекламных блоков
- Улучшена производительность отображения рекламы

## [1.0.0] - 2026-01-23

### Добавлено
- **Live Streaming**: Полная поддержка live трансляций
  - HLS стриминг
  - Управление стримами (создание, запуск, остановка)
  - Счетчик зрителей в реальном времени
  - Статистика просмотров
  - Планирование стримов
- **Система каналов**: Расширенный функционал каналов
  - Плейлисты каналов
  - Аналитика каналов
  - Система донатов
  - Совместные плейлисты с управлением разрешениями

### Изменено
- Улучшена структура базы данных для live стримов
- Оптимизирована работа с HLS потоками

## [0.9.0] - 2026-01-20

### Добавлено
- **Collaborative Playlists**: Совместные плейлисты
  - Добавление соавторов
  - Управление разрешениями (add, edit, manage)
  - API для работы с соавторами
- **Система хранилищ**: Управление хранилищами медиа-файлов
  - Поддержка локального хранилища
  - Настройка путей и квот
  - Мониторинг использования

### Изменено
- Улучшена система управления плейлистами
- Оптимизированы запросы к базе данных

## [0.8.0] - 2026-01-17

### Добавлено
- **Система моделей**: Управление моделями/актерами
  - Профили моделей
  - Привязка к видео
  - Статистика по моделям
- **Улучшения безопасности**:
  - Защита от hotlinking
  - Фильтрация User-Agent
  - Подписанные URL для медиа-файлов

### Изменено
- Улучшена защита медиа-контента
- Оптимизирована доставка видео

## [0.7.0] - 2026-01-15

### Добавлено
- **Video Chapters**: Главы для видео
  - Создание и редактирование глав
  - Навигация по главам в плеере
  - API для управления главами
- **Infinite Scroll**: Бесконечная прокрутка
  - Автоматическая подгрузка видео
  - Поддержка различных сортировок
  - Оптимизация производительности

### Изменено
- Улучшен видеоплеер с поддержкой глав
- Оптимизирована загрузка списков видео

## [0.6.0] - 2026-01-14

### Добавлено
- **Trending Algorithm**: Алгоритм трендовых видео
  - Учет просмотров, лайков, комментариев
  - Приоритет свежего контента
  - Настраиваемые веса метрик
- **Система кэширования**: Улучшенное кэширование
  - Кэширование запросов к БД
  - Управление кэшем в админ-панели
  - Автоматическая инвалидация

### Изменено
- Оптимизирован алгоритм выборки трендовых видео
- Улучшена производительность главной страницы

## [0.5.0] - 2026-01-12

### Добавлено
- **Система комментариев**: Полнофункциональные комментарии
  - Древовидная структура (ответы на комментарии)
  - Лайки/дизлайки комментариев
  - Модерация комментариев
  - Уведомления о новых комментариях
- **Worker система**: Асинхронная обработка задач
  - Messenger worker для фоновых задач
  - Мониторинг worker'ов в админке
  - Управление очередями

### Изменено
- Улучшена система уведомлений
- Оптимизирована обработка комментариев

## [0.4.0] - 2026-01-10

### Добавлено
- **Система плейлистов**: Управление плейлистами
  - Создание и редактирование плейлистов
  - Добавление видео в плейлисты
  - Публичные и приватные плейлисты
  - Сортировка видео в плейлистах
- **Закладки**: Система закладок для видео
  - Добавление видео в закладки
  - Управление закладками

### Изменено
- Улучшен интерфейс управления плейлистами
- Оптимизированы запросы для плейлистов

## [0.3.0] - 2025-12-30

### Добавлено
- **Система тегов**: Полная поддержка тегов
  - Создание и управление тегами
  - Привязка тегов к видео
  - Поиск по тегам
  - Облако тегов
- **Аналитика**: Базовая аналитика
  - Статистика просмотров
  - Отчеты по видео
  - Дашборд в админке

### Изменено
- Улучшена система поиска с учетом тегов
- Оптимизированы запросы для тегов

## [0.2.0] - 2025-12-29

### Добавлено
- **Система категорий**: Иерархические категории
  - Древовидная структура категорий
  - Управление категориями в админке
  - Фильтрация видео по категориям
- **Обработка видео**: Асинхронная обработка
  - Транскодирование видео
  - Генерация превью
  - Множественные разрешения (360p, 480p, 720p, 1080p)
  - Статусы обработки

### Изменено
- Улучшена система загрузки видео
- Оптимизирована обработка больших файлов

## [0.1.0] - 2025-12-26

### Добавлено
- **Базовый функционал**: Первая версия платформы
  - Регистрация и авторизация пользователей
  - Загрузка видео
  - Просмотр видео
  - Система лайков/дизлайков
  - Базовая админ-панель
  - Профили пользователей
- **Инфраструктура**:
  - Symfony 8.0
  - Doctrine ORM 3.5
  - MySQL 8.0
  - Tailwind CSS 3.4
  - Stimulus 3.2
  - Webpack Encore 4.7

### Технические детали
- PHP 8.4+ с современным синтаксом
- Doctrine attributes вместо annotations
- Асинхронная обработка через Symfony Messenger
- Адаптивный дизайн с Tailwind CSS
- Модульная архитектура

---

## Типы изменений

- **Добавлено** - для новых функций
- **Изменено** - для изменений в существующей функциональности
- **Устарело** - для функций, которые скоро будут удалены
- **Удалено** - для удаленных функций
- **Исправлено** - для исправления багов
- **Безопасность** - для исправлений уязвимостей

## Ссылки

- [Документация проекта](docs/)
- [Руководство по разработке](docs/DEVELOPMENT.md)
- [Система разрешений](docs/PERMISSIONS_GUIDE.md)
- [Рекламная система](docs/ADVERTISING_SYSTEM.md)
- [Защита контента](docs/CONTENT_PROTECTION.md)
- [Система уведомлений](docs/NOTIFICATIONS_SYSTEM.md)
