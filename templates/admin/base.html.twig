<!DOCTYPE html>
<html lang="{{ app.request.locale }}">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="csrf-token" content="{{ csrf_token('htmx') }}">
        <title>{% block title %}Admin Panel{% endblock %}{% if setting('append_site_name_to_title') %} - {{ site_name() }}{% endif %}</title>
        {% if site_favicon() %}
        <link rel="icon" type="image/x-icon" href="{{ site_favicon() }}">
        {% endif %}
        {% block stylesheets %}{% endblock %}
        {{ encore_entry_link_tags('app') }}
        {{ encore_entry_script_tags('app') }}
    </head>
    <body class="admin-panel bg-gray-50 font-sans antialiased" data-controller="csrf-protection">
        <div class="min-h-screen">
        <!-- Sidebar -->
        <aside class="fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg transform -translate-x-full lg:translate-x-0 transition-transform duration-300 ease-in-out" data-controller="admin-sidebar" data-admin-sidebar-target="sidebar">
            <div class="flex flex-col h-full">
                <div class="flex items-center justify-center h-16 px-4 bg-gray-700 hover:bg-gray-700">
                    {% if site_logo() %}
                    <img src="{{ site_logo() }}" alt="{{ site_name() }}" class="h-10 object-contain">
                    {% else %}
                    <div class="w-10 h-10 bg-blue-600 flex items-center justify-center text-white font-bold text-xs">
                        <h1 class="text-sm font-semibold text-white">{{ site_name()|slice(0, 1)|upper }}</h1>
                        <p class="text-xs text-gray-400">Admin Panel</p>
                    </div>
                    {% endif %}
                </div>
                <nav class="flex-1 px-2 py-4 space-y-2 overflow-y-auto">
                    <a href="{{ path('admin_dashboard') }}" class="flex items-center gap-2 mx-2 px-3 py-1.5 pl-2 text-xs font-semibold uppercase text-gray-500 hover:bg-gray-500 hover:text-white rounded {{ app.request.attributes.get('_route') == 'admin_dashboard' ? 'bg-blue-100 text-blue-900' : 'text-gray-700 hover:bg-gray-100' }}">
                        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="iconify iconify--solar" width="21" height="21" viewBox="0 0 24 24">
                            <path fill="none" stroke="currentColor" stroke-width="1.5" d="M2.5 6.5a4 4 0 1 1 8 0a4 4 0 0 1-8 0Zm11 11a4 4 0 1 1 8 0a4 4 0 0 1-8 0Zm8-11c0-1.886 0-2.828-.586-3.414S19.386 2.5 17.5 2.5s-2.828 0-3.414.586S13.5 4.614 13.5 6.5s0 2.828.586 3.414s1.528.586 3.414.586s2.828 0 3.414-.586s.586-1.528.586-3.414Zm-11 11c0-1.886 0-2.828-.586-3.414S8.386 13.5 6.5 13.5s-2.828 0-3.414.586S2.5 15.614 2.5 17.5s0 2.828.586 3.414s1.528.586 3.414.586s2.828 0 3.414-.586s.586-1.528.586-3.414Z"></path>
                        </svg>
                        Dashboard
                    </a>
                    <a href="{{ path('admin_analytics') }}" class="flex items-center gap-2 mx-2 px-3 py-1.5 pl-2 text-xs font-semibold uppercase text-gray-500 hover:bg-gray-500 hover:text-white rounded {{ app.request.attributes.get('_route') == 'admin_analytics' ? 'bg-blue-100 text-blue-900' : 'text-gray-700 hover:bg-gray-100' }}">
                        <svg xmlns="http://www.w3.org/2000/svg" width="21" height="21" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                        </svg>
                        Analytics
                    </a>
                    {# Video Section #}
                    <div class="mt-3" data-sidebar-section="content">
                        <button type="button" class="sidebar-section-toggle w-full flex items-center justify-between px-3 py-1.5 text-xs font-semibold text-gray-700 uppercase tracking-wider hover:text-gray-300 transition-colors" data-section-toggle="content">
                            <span class="flex items-center gap-2">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                                    <g fill="none" stroke="currentColor" stroke-width="1.5">
                                        <path d="M19.562 7a2.132 2.132 0 0 0-2.1-2.5H6.538a2.132 2.132 0 0 0-2.1 2.5M17.5 4.5c.028-.26.043-.389.043-.496a2 2 0 0 0-1.787-1.993C15.65 2 15.52 2 15.26 2H8.74c-.26 0-.391 0-.497.011a2 2 0 0 0-1.787 1.993c0 .107.014.237.043.496" />
                                        <path stroke-linecap="round" d="M21.194 16.793c-.35 2.48-.525 3.721-1.422 4.464s-2.22.743-4.867.743h-5.81c-2.646 0-3.97 0-4.867-.743s-1.072-1.983-1.422-4.464l-.422-3c-.447-3.164-.67-4.745.278-5.77C3.61 7 5.298 7 8.672 7h6.656c3.374 0 5.062 0 6.01 1.024c.749.809.767 1.966.521 3.976" />
                                        <path d="M14.581 13.616c.559.346.559 1.242 0 1.588l-3.371 2.09c-.543.337-1.21-.1-1.21-.794v-4.18c0-.693.667-1.13 1.21-.794z" />
                                    </g>
                                </svg>
                                Video Management
                            </span>
                            <svg class="w-3 h-3 transition-transform duration-200" data-section-icon="content" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </button>

    

                        <div class="sidebar-section-content mt-2 space-y-1" data-section-content="content">
                            <div class="px-6 py-2 mx-2 ltr:pl-5 rtl:pr-5">
                                <div class="space-y-1 border-0 border-l border-dashed border-slate-300 ltr:pl-1 rtl:pr-1">
                                    <div><a title="All videos" class="relative flex w-full cursor-pointer items-center rounded-lg py-2 px-5 text-sm text-start before:absolute before:-left-0.5 before:top-[18px] before:h-px before:w-3 before:border-t before:border-dashed before:border-gray-300 before:content-[&quot;&quot;] focus:text-accent {{ app.request.attributes.get('_route') starts with 'admin_videos' ? 'bg-transparent font-medium text-accent-hover' : 'text-body-dark hover:text-accent focus:text-accent' }}" href="{{ path('admin_videos') }}"><span>All videos</span></a></div>
                                    <div><a title="Categories" class="relative flex w-full cursor-pointer items-center rounded-lg py-2 px-5 text-sm text-start before:absolute before:-left-0.5 before:top-[18px] before:h-px before:w-3 before:border-t before:border-dashed before:border-gray-300 before:content-[&quot;&quot;] focus:text-accent {{ app.request.attributes.get('_route') starts with 'admin_categories' ? 'bg-transparent font-medium text-accent-hover' : 'text-body-dark hover:text-accent focus:text-accent' }}" href="{{ path('admin_categories') }}"><span>Categories</span></a></div>
                                    <div><a title="Tags" class="relative flex w-full cursor-pointer items-center rounded-lg py-2 px-5 text-sm text-start before:absolute before:-left-0.5 before:top-[18px] before:h-px before:w-3 before:border-t before:border-dashed before:border-gray-300 before:content-[&quot;&quot;] focus:text-accent {{ app.request.attributes.get('_route') starts with 'admin_tags' ? 'bg-transparent font-medium text-accent-hover' : 'text-body-dark hover:text-accent focus:text-accent' }}" href="{{ path('admin_tags') }}"><span>Tags</span></a></div>
                                    <div><a title="Playlists" class="relative flex w-full cursor-pointer items-center rounded-lg py-2 px-5 text-sm text-start before:absolute before:-left-0.5 before:top-[18px] before:h-px before:w-3 before:border-t before:border-dashed before:border-gray-300 before:content-[&quot;&quot;] focus:text-accent {{ app.request.attributes.get('_route') starts with 'admin_playlists' ? 'bg-transparent font-medium text-accent-hover' : 'text-body-dark hover:text-accent focus:text-accent' }}" href="{{ path('admin_playlists_index') }}"><span>Playlists</span></a></div>
                                    <div><a title="Comments" class="relative flex w-full cursor-pointer items-center rounded-lg py-2 px-5 text-sm text-start before:absolute before:-left-0.5 before:top-[18px] before:h-px before:w-3 before:border-t before:border-dashed before:border-gray-300 before:content-[&quot;&quot;] focus:text-accent {{ app.request.attributes.get('_route') starts with 'admin_comments' ? 'bg-transparent font-medium text-accent-hover' : 'text-body-dark hover:text-accent focus:text-accent' }}" href="{{ path('admin_comments') }}"><span>Comments</span></a></div>
                                    <div><a title="Чат" class="relative flex w-full cursor-pointer items-center rounded-lg py-2 px-5 text-sm text-start before:absolute before:-left-0.5 before:top-[18px] before:h-px before:w-3 before:border-t before:border-dashed before:border-gray-300 before:content-[&quot;&quot;] focus:text-accent {{ app.request.attributes.get('_route') starts with 'admin_chat' ? 'bg-transparent font-medium text-accent-hover' : 'text-body-dark hover:text-accent focus:text-accent' }}" href="{{ path('admin_chat') }}"><span>Чат</span></a></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    {# Posts Section #}
                    <div class="mt-4" data-sidebar-section="posts">
                        <button type="button" class="sidebar-section-toggle w-full flex items-center justify-between px-3 py-1.5 text-xs font-semibold text-gray-700 uppercase tracking-wider hover:text-gray-300 transition-colors" data-section-toggle="posts">
                            <span class="flex items-center gap-2">
                                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="iconify iconify--solar" width="21" height="21" viewBox="0 0 24 24">
                                    <g fill="none" stroke="currentColor" stroke-width="1.5">
                                        <path d="m18.18 8.04l.463-.464a1.966 1.966 0 1 1 2.781 2.78l-.463.464M18.18 8.04s.058.984.927 1.853s1.854.927 1.854.927M18.18 8.04l-4.26 4.26c-.29.288-.434.433-.558.592q-.22.282-.374.606c-.087.182-.151.375-.28.762l-.413 1.24l-.134.401m8.8-5.081l-4.26 4.26c-.29.29-.434.434-.593.558q-.282.22-.606.374c-.182.087-.375.151-.762.28l-1.24.413l-.401.134m0 0l-.401.134a.53.53 0 0 1-.67-.67l.133-.402m.938.938l-.938-.938"></path>
                                        <path stroke-linecap="round" d="M8 13h2.5M8 9h6.5M8 17h1.5M19.828 3.172C18.657 2 16.771 2 13 2h-2C7.229 2 5.343 2 4.172 3.172S3 6.229 3 10v4c0 3.771 0 5.657 1.172 6.828S7.229 22 11 22h2c3.771 0 5.657 0 6.828-1.172c.944-.943 1.127-2.348 1.163-4.828"></path>
                                    </g>
                                </svg>
                                Posts & Publications
                            </span>
                            <svg class="w-3 h-3 transition-transform duration-200" data-section-icon="posts" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </button>
                        <div class="sidebar-section-content" data-section-content="posts">
<div class="px-6 py-2 mx-2 ltr:pl-5 rtl:pr-5">
    <div class="space-y-1 border-0 border-l border-dashed border-slate-300 ltr:pl-1 rtl:pr-1">
        <div><a title="Posts" class="relative flex w-full cursor-pointer items-center rounded-lg py-2 px-5 text-sm text-start before:absolute before:-left-0.5 before:top-[18px] before:h-px before:w-3 before:border-t before:border-dashed before:border-gray-300 before:content-[&quot;&quot;] focus:text-accent {{ app.request.attributes.get('_route') starts with 'admin_posts' and not (app.request.attributes.get('_route') starts with 'admin_post_categories') ? 'bg-transparent font-medium text-accent-hover' : 'text-body-dark hover:text-accent focus:text-accent' }}" href="{{ path('admin_posts') }}"><span>Posts</span></a></div>
        <div><a title="Post Categories" class="relative flex w-full cursor-pointer items-center rounded-lg py-2 px-5 text-sm text-start before:absolute before:-left-0.5 before:top-[18px] before:h-px before:w-3 before:border-t before:border-dashed before:border-gray-300 before:content-[&quot;&quot;] focus:text-accent {{ app.request.attributes.get('_route') starts with 'admin_post_categories' ? 'bg-transparent font-medium text-accent-hover' : 'text-body-dark hover:text-accent focus:text-accent' }}" href="{{ path('admin_post_categories') }}"><span>Post Categories</span></a></div>
    </div>
</div>
                        </div>
                    </div>
                    {# Channels Section #}
                    <div class="mt-4" data-sidebar-section="channels">
                        <button type="button" class="sidebar-section-toggle w-full flex items-center justify-between px-3 py-1.5 text-xs font-semibold text-gray-700 uppercase tracking-wider hover:text-gray-300 transition-colors" data-section-toggle="channels">
                            <span class="flex items-center gap-2">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                                    <g fill="none" stroke="currentColor" stroke-width="1.5">
                                        <path d="M19.562 7a2.132 2.132 0 0 0-2.1-2.5H6.538a2.132 2.132 0 0 0-2.1 2.5M17.5 4.5c.028-.26.043-.389.043-.496a2 2 0 0 0-1.787-1.993C15.65 2 15.52 2 15.26 2H8.74c-.26 0-.391 0-.497.011a2 2 0 0 0-1.787 1.993c0 .107.014.237.043.496"/>
                                        <path stroke-linecap="round" d="M15 18H9m12.194-1.207c-.35 2.48-.525 3.721-1.422 4.464s-2.22.743-4.867.743h-5.81c-2.646 0-3.97 0-4.867-.743s-1.072-1.983-1.422-4.464l-.422-3c-.447-3.164-.67-4.745.278-5.77C3.61 7 5.298 7 8.672 7h6.656c3.374 0 5.062 0 6.01 1.024c.749.809.767 1.966.521 3.976"/>
                                    </g>
                                </svg>
                                Channels
                            </span>
                            <svg class="w-3 h-3 transition-transform duration-200" data-section-icon="channels" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </button>
                        <div class="sidebar-section-content" data-section-content="channels">
<div class="px-6 py-2 mx-2 ltr:pl-5 rtl:pr-5">
    <div class="space-y-1 border-0 border-l border-dashed border-slate-300 ltr:pl-1 rtl:pr-1">
        <div><a title="Channels" class="relative flex w-full cursor-pointer items-center rounded-lg py-2 px-5 text-sm text-start before:absolute before:-left-0.5 before:top-[18px] before:h-px before:w-3 before:border-t before:border-dashed before:border-gray-300 before:content-[&quot;&quot;] focus:text-accent {{ app.request.attributes.get('_route') starts with 'admin_channels' ? 'bg-transparent font-medium text-accent-hover' : 'text-body-dark hover:text-accent focus:text-accent' }}" href="{{ path('admin_channels_index') }}"><span>Channels</span></a></div>
    </div>
</div>
                        </div>
                    </div>
                    {# Users Section #}
                    <div class="mt-4" data-sidebar-section="users">
                        <button type="button" class="sidebar-section-toggle w-full flex items-center justify-between px-3 py-1.5 text-xs font-semibold text-gray-700 uppercase tracking-wider hover:text-gray-300 transition-colors" data-section-toggle="users">
                            <span class="flex items-center gap-2">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                                    <g fill="none">
                                        <path stroke="currentColor" stroke-linecap="round" stroke-width="1.5" d="M8.913 15.934c1.258.315 2.685.315 4.122-.07s2.673-1.099 3.605-2.001"/>
                                        <ellipse cx="14.509" cy="9.774" fill="currentColor" rx="1" ry="1.5" transform="rotate(-15 14.51 9.774)"/>
                                        <ellipse cx="8.714" cy="11.328" fill="currentColor" rx="1" ry="1.5" transform="rotate(-15 8.714 11.328)"/>
                                        <path stroke="currentColor" stroke-linecap="round" stroke-width="1.5" d="M20.796 9.643c1.111 4.147 1.667 6.22.724 7.853s-3.016 2.19-7.163 3.3c-4.147 1.111-6.22 1.667-7.853.724s-2.19-3.016-3.3-7.163c-1.112-4.147-1.667-6.22-.724-7.853s3.016-2.19 7.163-3.3c4.147-1.112 6.22-1.667 7.853-.724c1.009.582 1.606 1.595 2.177 3.26"/>
                                        <path stroke="currentColor" stroke-width="1.5" d="m13 16l.478.974a1.5 1.5 0 1 0 2.693-1.322l-.46-.935"/>
                                    </g>
                                </svg>
                                Users & Groups
                            </span>
                            <svg class="w-3 h-3 transition-transform duration-200" data-section-icon="users" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </button>
                        <div class="sidebar-section-content" data-section-content="users">
<div class="px-6 py-2 mx-2 ltr:pl-5 rtl:pr-5">
    <div class="space-y-1 border-0 border-l border-dashed border-slate-300 ltr:pl-1 rtl:pr-1">
        <div><a title="Users" class="relative flex w-full cursor-pointer items-center rounded-lg py-2 px-5 text-sm text-start before:absolute before:-left-0.5 before:top-[18px] before:h-px before:w-3 before:border-t before:border-dashed before:border-gray-300 before:content-[&quot;&quot;] focus:text-accent {{ app.request.attributes.get('_route') starts with 'admin_users' ? 'bg-transparent font-medium text-accent-hover' : 'text-body-dark hover:text-accent focus:text-accent' }}" href="{{ path('admin_users') }}"><span>Users</span></a></div>
        <div><a title="Roles" class="relative flex w-full cursor-pointer items-center rounded-lg py-2 px-5 text-sm text-start before:absolute before:-left-0.5 before:top-[18px] before:h-px before:w-3 before:border-t before:border-dashed before:border-gray-300 before:content-[&quot;&quot;] focus:text-accent {{ app.request.attributes.get('_route') starts with 'admin_roles' ? 'bg-transparent font-medium text-accent-hover' : 'text-body-dark hover:text-accent focus:text-accent' }}" href="{{ path('admin_roles') }}"><span>Roles</span></a></div>
        <div><a title="Permissions" class="relative flex w-full cursor-pointer items-center rounded-lg py-2 px-5 text-sm text-start before:absolute before:-left-0.5 before:top-[18px] before:h-px before:w-3 before:border-t before:border-dashed before:border-gray-300 before:content-[&quot;&quot;] focus:text-accent {{ app.request.attributes.get('_route') starts with 'admin_permissions' ? 'bg-transparent font-medium text-accent-hover' : 'text-body-dark hover:text-accent focus:text-accent' }}" href="{{ path('admin_permissions') }}"><span>Permissions</span></a></div>
        <div><a title="Models" class="relative flex w-full cursor-pointer items-center rounded-lg py-2 px-5 text-sm text-start before:absolute before:-left-0.5 before:top-[18px] before:h-px before:w-3 before:border-t before:border-dashed before:border-gray-300 before:content-[&quot;&quot;] focus:text-accent {{ app.request.attributes.get('_route') starts with 'admin_models' ? 'bg-transparent font-medium text-accent-hover' : 'text-body-dark hover:text-accent focus:text-accent' }}" href="{{ path('admin_models') }}"><span>Models</span></a></div>
    </div>
</div>
                        </div>
                    </div>
                    {# Advertising Section #}
                    <div class="mt-4" data-sidebar-section="advertising">
                        <button type="button" class="sidebar-section-toggle w-full flex items-center justify-between px-3 py-1.5 text-xs font-semibold text-gray-700 uppercase tracking-wider hover:text-gray-300 transition-colors" data-section-toggle="advertising">
                            <span class="flex items-center gap-2">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                                    <path fill="currentColor" d="M12 8q-1.65 0-2.825 1.175T8 12q0 1.125.563 2.075t1.562 1.475q.4.2.563.587t-.013.788q-.175.35-.525.525t-.7 0q-1.575-.75-2.512-2.225T6 12q0-2.5 1.75-4.25T12 6q1.775 0 3.263.938T17.475 9.5q.15.35-.012.7t-.513.5q-.4.175-.8 0t-.6-.575q-.525-1-1.475-1.562T12 8m0-4Q8.65 4 6.325 6.325T4 12q0 3.15 2.075 5.4t5.2 2.55q.425.05.737.375t.288.75t-.313.7t-.712.25q-1.95-.125-3.638-.975t-2.95-2.213t-1.975-3.125T2 12q0-2.075.788-3.9t2.137-3.175T8.1 2.788T12 2q3.925 0 6.838 2.675t3.187 6.6q.05.4-.237.688t-.713.312t-.762-.275t-.388-.725q-.375-3-2.612-5.137T12 4m7.55 17.5l-3.3-3.275l-.75 2.275q-.125.35-.475.338t-.475-.363L12.275 12.9q-.1-.275.125-.5t.5-.125l7.575 2.275q.35.125.363.475t-.338.475l-2.275.75l3.3 3.3q.425.425.425.975t-.425.975t-.987.425t-.988-.425"/>
                                </svg>
                                Advertising
                            </span>
                            <svg class="w-3 h-3 transition-transform duration-200" data-section-icon="advertising" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </button>
                        <div class="sidebar-section-content" data-section-content="advertising">
                            <div class="px-6 py-2 mx-2 ltr:pl-5 rtl:pr-5">
                                <div class="space-y-1 border-0 border-l border-dashed border-slate-300 ltr:pl-1 rtl:pr-1">
                                    <div><a title="Ads Dashboard" class="relative flex w-full cursor-pointer items-center rounded-lg py-2 px-5 text-sm text-start before:absolute before:-left-0.5 before:top-[18px] before:h-px before:w-3 before:border-t before:border-dashed before:border-gray-300 before:content-[&quot;&quot;] focus:text-accent {{ app.request.attributes.get('_route') == 'admin_ads' ? 'bg-transparent font-medium text-accent-hover' : 'text-body-dark hover:text-accent focus:text-accent' }}" href="{{ path('admin_ads') }}"><span>Ads Dashboard</span></a></div>
                                    <div><a title="Ads" class="relative flex w-full cursor-pointer items-center rounded-lg py-2 px-5 text-sm text-start before:absolute before:-left-0.5 before:top-[18px] before:h-px before:w-3 before:border-t before:border-dashed before:border-gray-300 before:content-[&quot;&quot;] focus:text-accent {{ app.request.attributes.get('_route') starts with 'admin_ads_list' ? 'bg-transparent font-medium text-accent-hover' : 'text-body-dark hover:text-accent focus:text-accent' }}" href="{{ path('admin_ads_list') }}"><span>Ads</span></a></div>
                                    <div><a title="Campaigns" class="relative flex w-full cursor-pointer items-center rounded-lg py-2 px-5 text-sm text-start before:absolute before:-left-0.5 before:top-[18px] before:h-px before:w-3 before:border-t before:border-dashed before:border-gray-300 before:content-[&quot;&quot;] focus:text-accent {{ app.request.attributes.get('_route') starts with 'admin_ads_campaigns' ? 'bg-transparent font-medium text-accent-hover' : 'text-body-dark hover:text-accent focus:text-accent' }}" href="{{ path('admin_ads_campaigns') }}"><span>Campaigns</span></a></div>
                                    <div><a title="Placements" class="relative flex w-full cursor-pointer items-center rounded-lg py-2 px-5 text-sm text-start before:absolute before:-left-0.5 before:top-[18px] before:h-px before:w-3 before:border-t before:border-dashed before:border-gray-300 before:content-[&quot;&quot;] focus:text-accent {{ app.request.attributes.get('_route') starts with 'admin_ads_placements' ? 'bg-transparent font-medium text-accent-hover' : 'text-body-dark hover:text-accent focus:text-accent' }}" href="{{ path('admin_ads_placements') }}"><span>Placements</span></a></div>
                                    <div><a title="Segments" class="relative flex w-full cursor-pointer items-center rounded-lg py-2 px-5 text-sm text-start before:absolute before:-left-0.5 before:top-[18px] before:h-px before:w-3 before:border-t before:border-dashed before:border-gray-300 before:content-[&quot;&quot;] focus:text-accent {{ app.request.attributes.get('_route') starts with 'admin_ads_segments' ? 'bg-transparent font-medium text-accent-hover' : 'text-body-dark hover:text-accent focus:text-accent' }}" href="{{ path('admin_ads_segments') }}"><span>Segments</span></a></div>
                                    <div><a title="A/B Tests" class="relative flex w-full cursor-pointer items-center rounded-lg py-2 px-5 text-sm text-start before:absolute before:-left-0.5 before:top-[18px] before:h-px before:w-3 before:border-t before:border-dashed before:border-gray-300 before:content-[&quot;&quot;] focus:text-accent {{ app.request.attributes.get('_route') starts with 'admin_ads_abtests' ? 'bg-transparent font-medium text-accent-hover' : 'text-body-dark hover:text-accent focus:text-accent' }}" href="{{ path('admin_ads_abtests') }}"><span>A/B Tests</span></a></div>
                                    <div><a title="Statistics" class="relative flex w-full cursor-pointer items-center rounded-lg py-2 px-5 text-sm text-start before:absolute before:-left-0.5 before:top-[18px] before:h-px before:w-3 before:border-t before:border-dashed before:border-gray-300 before:content-[&quot;&quot;] focus:text-accent {{ app.request.attributes.get('_route') starts with 'admin_ads_statistics' ? 'bg-transparent font-medium text-accent-hover' : 'text-body-dark hover:text-accent focus:text-accent' }}" href="{{ path('admin_ads_statistics') }}"><span>Statistics</span></a></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    {# Settings Section #}
                    <div class="mt-4" data-sidebar-section="settings">
                        <button type="button" class="sidebar-section-toggle w-full flex items-center justify-between px-3 py-1.5 text-xs font-semibold text-gray-700 uppercase tracking-wider hover:text-gray-300 transition-colors" data-section-toggle="settings">
                            <span class="flex items-center gap-2">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                                    <g fill="none" stroke="currentColor" stroke-width="1.5">
                                        <circle cx="12" cy="12" r="3"/>
                                        <path stroke-linecap="round" d="M3.661 10.64c.473.296.777.802.777 1.36s-.304 1.064-.777 1.36c-.321.203-.529.364-.676.556a2 2 0 0 0-.396 1.479c.052.394.285.798.75 1.605c.467.807.7 1.21 1.015 1.453a2 2 0 0 0 1.479.396c.24-.032.483-.13.819-.308a1.62 1.62 0 0 1 1.567.008c.483.28.77.795.79 1.353c.014.38.05.64.143.863a2 2 0 0 0 1.083 1.083C10.602 22 11.068 22 12 22s1.398 0 1.765-.152a2 2 0 0 0 1.083-1.083c.092-.223.129-.483.143-.863c.02-.558.307-1.074.79-1.353a1.62 1.62 0 0 1 1.567-.008c.336.178.58.276.82.308a2 2 0 0 0 1.478-.396c.315-.242.548-.646 1.014-1.453c.208-.36.369-.639.489-.873m-.81-2.766a1.62 1.62 0 0 1-.777-1.36c0-.559.304-1.065.777-1.362c.321-.202.528-.363.676-.555a2 2 0 0 0 .396-1.479c-.052-.394-.285-.798-.75-1.605c-.467-.807-.7-1.21-1.015-1.453a2 2 0 0 0-1.479-.396c-.24.032-.483.13-.82.308a1.62 1.62 0 0 1-1.566-.008a1.62 1.62 0 0 1-.79-1.353c-.014-.38-.05-.64-.143-.863a2 2 0 0 0-1.083-1.083C13.398 2 12.932 2 12 2s-1.398 0-1.765.152a2 2 0 0 0-1.083 1.083c-.092.223-.129.483-.143.863a1.62 1.62 0 0 1-.79 1.353a1.62 1.62 0 0 1-1.567.008c-.336-.178-.58-.276-.82-.308a2 2 0 0 0-1.478.396C4.04 5.79 3.806 6.193 3.34 7c-.208.36-.369.639-.489.873"/>
                                    </g>
                                </svg>
                                Settings
                            </span>
                            <svg class="w-3 h-3 transition-transform duration-200" data-section-icon="settings" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </button>
                        <div class="sidebar-section-content" data-section-content="settings">
                            <div class="px-6 py-2 mx-2 ltr:pl-5 rtl:pr-5">
                                <div class="space-y-1 border-0 border-l border-dashed border-slate-300 ltr:pl-1 rtl:pr-1">
                                    <div><a title="Settings" class="relative flex w-full cursor-pointer items-center rounded-lg py-2 px-5 text-sm text-start before:absolute before:-left-0.5 before:top-[18px] before:h-px before:w-3 before:border-t before:border-dashed before:border-gray-300 before:content-[&quot;&quot;] focus:text-accent {{ app.request.attributes.get('_route') == 'admin_settings' ? 'bg-transparent font-medium text-accent-hover' : 'text-body-dark hover:text-accent focus:text-accent' }}" href="{{ path('admin_settings') }}"><span>Settings</span></a></div>
                                    <div><a title="Storage" class="relative flex w-full cursor-pointer items-center rounded-lg py-2 px-5 text-sm text-start before:absolute before:-left-0.5 before:top-[18px] before:h-px before:w-3 before:border-t before:border-dashed before:border-gray-300 before:content-[&quot;&quot;] focus:text-accent {{ app.request.attributes.get('_route') starts with 'admin_storage' ? 'bg-transparent font-medium text-accent-hover' : 'text-body-dark hover:text-accent focus:text-accent' }}" href="{{ path('admin_storage') }}"><span>Storage</span></a></div>
                                    <div><a title="Transcoding" class="relative flex w-full cursor-pointer items-center rounded-lg py-2 px-5 text-sm text-start before:absolute before:-left-0.5 before:top-[18px] before:h-px before:w-3 before:border-t before:border-dashed before:border-gray-300 before:content-[&quot;&quot;] focus:text-accent {{ app.request.attributes.get('_route') == 'admin_transcoding_settings' ? 'bg-transparent font-medium text-accent-hover' : 'text-body-dark hover:text-accent focus:text-accent' }}" href="{{ path('admin_transcoding_settings') }}"><span>Transcoding</span></a></div>
                                    <div><a title="Encoding Profiles" class="relative flex w-full cursor-pointer items-center rounded-lg py-2 px-5 text-sm text-start before:absolute before:-left-0.5 before:top-[18px] before:h-px before:w-3 before:border-t before:border-dashed before:border-gray-300 before:content-[&quot;&quot;] focus:text-accent {{ app.request.attributes.get('_route') starts with 'admin_encoding_profiles' ? 'bg-transparent font-medium text-accent-hover' : 'text-body-dark hover:text-accent focus:text-accent' }}" href="{{ path('admin_encoding_profiles') }}"><span>Encoding Profiles</span></a></div>
                                    <div><a title="SEO Settings" class="relative flex w-full cursor-pointer items-center rounded-lg py-2 px-5 text-sm text-start before:absolute before:-left-0.5 before:top-[18px] before:h-px before:w-3 before:border-t before:border-dashed before:border-gray-300 before:content-[&quot;&quot;] focus:text-accent {{ app.request.attributes.get('_route') == 'admin_seo_settings' ? 'bg-transparent font-medium text-accent-hover' : 'text-body-dark hover:text-accent focus:text-accent' }}" href="{{ path('admin_seo_settings') }}"><span>SEO Settings</span></a></div>
                                    <div><a title="Analytics" class="relative flex w-full cursor-pointer items-center rounded-lg py-2 px-5 text-sm text-start before:absolute before:-left-0.5 before:top-[18px] before:h-px before:w-3 before:border-t before:border-dashed before:border-gray-300 before:content-[&quot;&quot;] focus:text-accent {{ app.request.attributes.get('_route') == 'admin_analytics_settings' ? 'bg-transparent font-medium text-accent-hover' : 'text-body-dark hover:text-accent focus:text-accent' }}" href="{{ path('admin_analytics_settings') }}"><span>Analytics</span></a></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    {# System Section #}
                    <div class="mt-4" data-sidebar-section="system">
                        <button type="button" class="sidebar-section-toggle w-full flex items-center justify-between px-3 py-1.5 text-xs font-semibold text-gray-700 uppercase tracking-wider hover:text-gray-300 transition-colors" data-section-toggle="system">
                            <span class="flex items-center gap-2">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                                    <g fill="none" stroke="currentColor" stroke-width="1.5">
                                        <circle cx="8" cy="10" r="2"/>
                                        <circle cx="2" cy="2" r="2" transform="matrix(1 0 0 -1 14 16)"/>
                                        <path stroke-linecap="round" d="M8 14v5m8-9V5M8 5v1m8 13v-1m6-6c0 4.714 0 7.071-1.465 8.535C19.072 22 16.714 22 12 22s-7.071 0-8.536-1.465C2 19.072 2 16.714 2 12s0-7.071 1.464-8.536C4.93 2 7.286 2 12 2s7.071 0 8.535 1.464c.974.974 1.3 2.343 1.41 4.536"/>
                                    </g>
                                </svg>
                                System
                            </span>
                            <svg class="w-3 h-3 transition-transform duration-200" data-section-icon="system" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </button>
                        <div class="sidebar-section-content" data-section-content="system">
                            <div class="px-6 py-2 mx-2 ltr:pl-5 rtl:pr-5">
                                <div class="space-y-1 border-0 border-l border-dashed border-slate-300 ltr:pl-1 rtl:pr-1">
                                    <div><a title="Мониторинг" class="relative flex w-full cursor-pointer items-center rounded-lg py-2 px-5 text-sm text-start before:absolute before:-left-0.5 before:top-[18px] before:h-px before:w-3 before:border-t before:border-dashed before:border-gray-300 before:content-[&quot;&quot;] focus:text-accent {{ app.request.attributes.get('_route') starts with 'admin_system' ? 'bg-transparent font-medium text-accent-hover' : 'text-body-dark hover:text-accent focus:text-accent' }}" href="{{ path('admin_system_dashboard') }}"><span>Мониторинг</span></a></div>
                                    <div><a title="Worker" class="relative flex w-full cursor-pointer items-center rounded-lg py-2 px-5 text-sm text-start before:absolute before:-left-0.5 before:top-[18px] before:h-px before:w-3 before:border-t before:border-dashed before:border-gray-300 before:content-[&quot;&quot;] focus:text-accent {{ app.request.attributes.get('_route') starts with 'admin_worker' ? 'bg-transparent font-medium text-accent-hover' : 'text-body-dark hover:text-accent focus:text-accent' }}" href="{{ path('admin_worker_index') }}"><span>Worker</span></a></div>
                                    <div><a title="Кэш" class="relative flex w-full cursor-pointer items-center rounded-lg py-2 px-5 text-sm text-start before:absolute before:-left-0.5 before:top-[18px] before:h-px before:w-3 before:border-t before:border-dashed before:border-gray-300 before:content-[&quot;&quot;] focus:text-accent {{ app.request.attributes.get('_route') starts with 'admin_cache' ? 'bg-transparent font-medium text-accent-hover' : 'text-body-dark hover:text-accent focus:text-accent' }}" href="{{ path('admin_cache_index') }}"><span>Кэш</span></a></div>
                                    <div><a title="Уведомления" class="relative flex w-full cursor-pointer items-center rounded-lg py-2 px-5 text-sm text-start before:absolute before:-left-0.5 before:top-[18px] before:h-px before:w-3 before:border-t before:border-dashed before:border-gray-300 before:content-[&quot;&quot;] focus:text-accent {{ app.request.attributes.get('_route') starts with 'admin_notifications' ? 'bg-transparent font-medium text-accent-hover' : 'text-body-dark hover:text-accent focus:text-accent' }}" href="{{ path('admin_notifications_index') }}"><span>Уведомления</span></a></div>
                                    <div><a title="Workflow" class="relative flex w-full cursor-pointer items-center rounded-lg py-2 px-5 text-sm text-start before:absolute before:-left-0.5 before:top-[18px] before:h-px before:w-3 before:border-t before:border-dashed before:border-gray-300 before:content-[&quot;&quot;] focus:text-accent {{ app.request.attributes.get('_route') starts with 'admin_workflow' ? 'bg-transparent font-medium text-accent-hover' : 'text-body-dark hover:text-accent focus:text-accent' }}" href="{{ path('admin_workflow') }}"><span>Workflow</span></a></div>
                                    <div><a title="Планировщик" class="relative flex w-full cursor-pointer items-center rounded-lg py-2 px-5 text-sm text-start before:absolute before:-left-0.5 before:top-[18px] before:h-px before:w-3 before:border-t before:border-dashed before:border-gray-300 before:content-[&quot;&quot;] focus:text-accent {{ app.request.attributes.get('_route') starts with 'admin_scheduler' ? 'bg-transparent font-medium text-accent-hover' : 'text-body-dark hover:text-accent focus:text-accent' }}" href="{{ path('admin_scheduler') }}"><span>Планировщик</span></a></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </nav>
                
                <div class="flex-shrink-0 p-4 border-t border-gray-200">
                    <div class="flex items-center">
                        <div class="flex-shrink-0">
                            {% if app.user.avatar %}
                                <img src="/media/avatars/{{ app.user.avatar }}" alt="{{ app.user.username }}" class="h-10 w-10 rounded-full object-cover border-2 border-gray-600">
                            {% else %}
                                <div class="h-10 w-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center border-2 border-gray-600">
                                    <span class="text-sm font-semibold text-white">
                                        {{ app.user.username|slice(0, 1)|upper }}
                                    </span>
                                </div>
                            {% endif %}
                        </div>
                        <div class="ml-3">
                            <p class="text-sm font-medium text-gray-100">{{ app.user.username }}</p>
                            <p class="text-xs text-gray-400">
                                {% set userRoles = app.user.roles|filter(role => role != 'ROLE_USER') %}
                                {% if userRoles|length > 0 %}
                                    Role: {{ userRoles|first|replace({'ROLE_': '', '_': ' '})|title }}
                                {% else %}
                                    User
                                {% endif %}
                            </p>
                        </div>
                    </div>
                </div>
                
        </aside>
        <!-- Main Content -->
        <div class="lg:pl-64">
        <!-- Top Bar -->
        <header class="h-16 bg-white shadow-sm border-b border-gray-200">
        <div class="flex items-center justify-between h-full px-6">
        <div class="flex-1">
        <h1 class="text-2xl font-semibold text-gray-900">{% block page_title %}Admin Panel{% endblock %}</h1>
        </div>
        <div class="flex items-center gap-4">
        {# Server Info #}
        {% set server = server_info() %}
        <div class="flex items-center gap-4 text-xs border-r border-gray-200 pr-4">
        {# Время #}
        <div class="flex items-center gap-1.5 text-gray-600" title="Серверное время&#10;Часовой пояс: {{ server.timezone }}&#10;Дата: {{ server.date }}">
        <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
        </svg>
        <span id="server-time" class="font-mono">{{ server.time_short }}</span>
        </div>
        {# CPU #}
        {% if server.load.available %}
        <div class="flex items-center gap-1.5" title="Загрузка CPU: {{ server.load.load_1 }}%">
        <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"></path>
        </svg>
        <div class="flex items-center gap-1">
        <span class="text-gray-500">CPU</span>
        <span class="font-medium {{ server.load.load_1 > 80 ? 'text-red-600' : (server.load.load_1 > 50 ? 'text-yellow-600' : 'text-green-600') }}">
        {{ server.load.load_1 }}%
        </span>
        </div>
        </div>
        {% endif %}
        {# Память #}
        <div class="flex items-center gap-1.5" title="Память PHP&#10;Использовано: {{ server.memory.usage }}&#10;Пик: {{ server.memory.peak }}&#10;Лимит: {{ server.memory.limit }}">
        <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
        </svg>
        <div class="flex items-center gap-1">
        <span class="text-gray-500">RAM</span>
        <span class="font-medium {{ server.memory.percent > 80 ? 'text-red-600' : (server.memory.percent > 50 ? 'text-yellow-600' : 'text-green-600') }}">
        {{ server.memory.usage }}
        </span>
        <span class="text-gray-400">/</span>
        <span class="text-gray-500">{{ server.memory.limit }}</span>
        </div>
        </div>
        {# Диск #}
        <div class="flex items-center gap-1.5" title="Дисковое пространство&#10;Свободно: {{ server.disk.free }}&#10;Всего: {{ server.disk.total }}&#10;Занято: {{ server.disk.percent }}%">
        <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4"></path>
        </svg>
        <div class="flex items-center gap-1">
        <span class="text-gray-500">HDD</span>
        <span class="font-medium {{ server.disk.percent > 90 ? 'text-red-600' : (server.disk.percent > 75 ? 'text-yellow-600' : 'text-green-600') }}">
        {{ server.disk.free }}
        </span>
        <span class="text-gray-400">free</span>
        </div>
        </div>
        {# Uptime #}
        {% if server.uptime %}
        <div class="flex items-center gap-1.5" title="Время работы сервера: {{ server.uptime }}&#10;ОС: {{ server.os_full }}&#10;Хост: {{ server.hostname }}">
        <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"></path>
        </svg>
        <div class="flex items-center gap-1">
        <span class="text-gray-500">Up</span>
        <span class="font-medium text-gray-600">{{ server.uptime }}</span>
        </div>
        </div>
        {% endif %}
        {# PHP Version #}
        <div class="flex items-center gap-1.5" title="PHP {{ server.php.version }}&#10;SAPI: {{ server.php.sapi }}&#10;Max execution: {{ server.php.max_execution_time }}&#10;Upload max: {{ server.php.upload_max_filesize }}&#10;OPcache: {{ server.php.opcache ? 'Включен' : 'Выключен' }}">
        <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path>
        </svg>
        <span class="text-gray-600">PHP {{ server.php_version }}</span>
        </div>
        {# Environment Mode #}
        <div class="flex items-center gap-1.5" title="Режим работы приложения&#10;Environment: {{ app.environment }}&#10;Debug: {{ app.debug ? 'Включен' : 'Выключен' }}">
        <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
        </svg>
        <span class="font-medium {{ app.environment == 'prod' ? 'text-green-600' : 'text-orange-600' }}">
        {{ app.environment|upper }}
        </span>
        </div>
        </div>
        {# Theme Switcher #}
        <button data-theme-toggle class="theme-switcher" title="Toggle theme" aria-label="Toggle theme">
        <svg data-theme-icon="light" class="mr-3 h-5 w-5 {{ app.request.attributes.get('_route') starts with 'admin_videos' ? 'text-blue-500' : 'text-gray-400 group-hover:text-gray-500' }}" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="display: none;">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
        </svg>
        <svg data-theme-icon="dark" class="mr-3 h-5 w-5 {{ app.request.attributes.get('_route') starts with 'admin_videos' ? 'text-blue-500' : 'text-gray-400 group-hover:text-gray-500' }}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>
        </svg>
        </button>
        
        {# Clear Cache Button #}
        <form action="{{ path('admin_cache_quick_clear') }}" method="POST" class="inline hover:transform hover:scale-105 border-r border-gray-200 pr-2">
        <button type="submit" 
            class="flex items-center text-gray-500 hover:text-blue-600 transition" title="Очистить кэш"
            onclick="this.disabled=true; this.innerHTML='<svg class=\'w-4 h-4 animate-spin\' fill=\'none\' viewBox=\'0 0 24 24\'><circle class=\'opacity-25\' cx=\'12\' cy=\'12\' r=\'10\' stroke=\'currentColor\' stroke-width=\'4\'></circle><path class=\'opacity-75\' fill=\'currentColor\' d=\'M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\'></path></svg>'; this.form.submit();">
        <svg class="mr-3 h-5 w-5 {{ app.request.attributes.get('_route') starts with 'admin_videos' ? 'text-blue-500' : 'text-gray-400 group-hover:text-gray-500' }}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
        </svg>
        </button>
        </form>
        {# Worker Status Indicator #}
        {% set worker_status = worker_status() %}
        <a href="{{ path('admin_worker_index') }}" 
            class="flex items-center gap-1.5 text-xs {{ worker_status.running ? 'text-green-600' : 'text-red-600' }} hover:opacity-80 transition"
            title="Messenger Worker: {{ worker_status.running ? 'Запущен (PID: ' ~ worker_status.pid ~ ')' : 'Остановлен' }}">
        <span class="w-2 h-2 rounded-full {{ worker_status.running ? 'bg-green-500 animate-pulse' : 'bg-red-500' }}"></span>
        <span class="hidden sm:inline">Worker</span>
        </a>
        {# User Dropdown Menu #}
        <div class="relative" x-data="{ open: false }" @click.away="open = false">
            <button @click="open = !open" class="flex items-center gap-2 hover:opacity-80 transition-opacity">
                {% if app.user.avatar %}
                    <img src="/media/avatars/{{ app.user.avatar }}" alt="{{ app.user.username }}" class="w-8 h-8 rounded-full object-cover border-2 border-gray-200">
                {% else %}
                    <div class="w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-semibold text-sm border-2 border-gray-200">
                        {{ app.user.username|slice(0, 1)|upper }}
                    </div>
                {% endif %}
                <div class="flex flex-col text-left">
                    <span class="text-gray-700 text-sm font-medium">{{ app.user.username }}</span>
                    <span class="text-gray-500 text-xs">
                        {% set userRoles = app.user.roles|filter(role => role != 'ROLE_USER') %}
                        {% if userRoles|length > 0 %}
                            {{ userRoles|first|replace({'ROLE_': '', '_': ' '})|title }}
                        {% else %}
                            User
                        {% endif %}
                    </span>
                </div>
                <svg class="w-4 h-4 text-gray-500 transition-transform" :class="{ 'rotate-180': open }" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                </svg>
            </button>
            
            {# Dropdown Menu #}
            <div x-show="open" 
                 x-transition:enter="transition ease-out duration-100"
                 x-transition:enter-start="transform opacity-0 scale-95"
                 x-transition:enter-end="transform opacity-100 scale-100"
                 x-transition:leave="transition ease-in duration-75"
                 x-transition:leave-start="transform opacity-100 scale-100"
                 x-transition:leave-end="transform opacity-0 scale-95"
                 class="absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50 border border-gray-200"
                 style="display: none;">
                <a href="{{ path('admin_users_edit', {id: app.user.id}) }}" class="flex items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors">
                    <svg class="w-4 h-4 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                    </svg>
                    Настройки
                </a>
                <a href="{{ path('user_profile_overview', {username: app.user.username}) }}" class="flex items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors">
                    <svg class="w-4 h-4 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                    </svg>
                    Мой профиль
                </a>
                <div class="border-t border-gray-200 my-1"></div>
                <a href="{{ path('app_logout') }}" class="flex items-center gap-2 px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path>
                    </svg>
                    Выход
                </a>
            </div>
        </div>
        </div>
        </div>
        </header>
        <!-- Content Area -->
        <main class="py-6" id="main-content">
        <div class="max-w-full mx-auto px-2 sm:px-6 lg:px-8">
        {# Flash messages - конвертируются в toast уведомления #}
        {% for message in app.flashes('success') %}
        <div data-flash-message data-flash-type="success" style="display: none;">{{ message }}</div>
        {% endfor %}
        {% for message in app.flashes('error') %}
        <div data-flash-message data-flash-type="error" style="display: none;">{{ message }}</div>
        {% endfor %}
        {% for message in app.flashes('warning') %}
        <div data-flash-message data-flash-type="warning" style="display: none;">{{ message }}</div>
        {% endfor %}
        {% for message in app.flashes('info') %}
        <div data-flash-message data-flash-type="info" style="display: none;">{{ message }}</div>
        {% endfor %}
        {% include 'admin/_breadcrumbs.html.twig' ignore missing %}
        {% block content %}{% endblock %}
        </div>
        </main>
        </div>
        </div>
        {% block javascripts %}{% endblock %}
        <script>
            // Обновление серверного времени каждую секунду
            (function() {
                const timeEl = document.getElementById('server-time');
                if (!timeEl) return;
                
                // Парсим начальное время из формата "HH:MM:SS"
                const initialTime = timeEl.textContent.trim();
                const [hours, minutes, seconds] = initialTime.split(':').map(Number);
                
                let serverDate = new Date();
                serverDate.setHours(hours, minutes, seconds);
                
                setInterval(function() {
                    serverDate.setSeconds(serverDate.getSeconds() + 1);
                    const pad = n => n.toString().padStart(2, '0');
                    timeEl.textContent = `${pad(serverDate.getHours())}:${pad(serverDate.getMinutes())}:${pad(serverDate.getSeconds())}`;
                }, 1000);
            })();
            
            // Сворачиваемые секции сайдбара
            (function() {
                const STORAGE_KEY = 'admin_sidebar_sections';
                
                // Загружаем сохранённое состояние
                function loadState() {
                    try {
                        const saved = localStorage.getItem(STORAGE_KEY);
                        return saved ? JSON.parse(saved) : {};
                    } catch (e) {
                        return {};
                    }
                }
                
                // Сохраняем состояние
                function saveState(state) {
                    try {
                        localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
                    } catch (e) {}
                }
                
                // Переключение секции
                function toggleSection(sectionName, forceState = null) {
                    const content = document.querySelector(`[data-section-content="${sectionName}"]`);
                    const icon = document.querySelector(`[data-section-icon="${sectionName}"]`);
                    
                    if (!content) return;
                    
                    const state = loadState();
                    const isCollapsed = forceState !== null ? !forceState : !state[sectionName];
                    
                    if (isCollapsed) {
                        content.style.maxHeight = '0';
                        content.style.opacity = '0';
                        content.style.overflow = 'hidden';
                        if (icon) icon.style.transform = 'rotate(-90deg)';
                        state[sectionName] = true;
                    } else {
                        content.style.maxHeight = content.scrollHeight + 'px';
                        content.style.opacity = '1';
                        content.style.overflow = 'visible';
                        if (icon) icon.style.transform = 'rotate(0deg)';
                        state[sectionName] = false;
                    }
                    
                    saveState(state);
                }
                
                // Инициализация
                function init() {
                    const state = loadState();
                    const sections = ['content', 'posts', 'channels', 'users', 'advertising', 'settings', 'system'];
                    
                    // Применяем сохранённое состояние
                    sections.forEach(section => {
                        const content = document.querySelector(`[data-section-content="${section}"]`);
                        const icon = document.querySelector(`[data-section-icon="${section}"]`);
                        
                        if (!content) return;
                        
                        // Добавляем стили для анимации
                        content.style.transition = 'max-height 0.2s ease-out, opacity 0.2s ease-out';
                        
                        if (state[section]) {
                            content.style.maxHeight = '0';
                            content.style.opacity = '0';
                            content.style.overflow = 'hidden';
                            if (icon) icon.style.transform = 'rotate(-90deg)';
                        } else {
                            content.style.maxHeight = content.scrollHeight + 'px';
                            content.style.opacity = '1';
                        }
                    });
                    
                    // Обработчики кликов
                    document.querySelectorAll('[data-section-toggle]').forEach(btn => {
                        btn.addEventListener('click', function() {
                            const sectionName = this.getAttribute('data-section-toggle');
                            toggleSection(sectionName);
                        });
                    });
                }
                
                // Запускаем после загрузки DOM
                if (document.readyState === 'loading') {
                    document.addEventListener('DOMContentLoaded', init);
                } else {
                    init();
                }
            })();
        </script>
    </body>
</html>