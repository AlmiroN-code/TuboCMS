# Документ требований: Раздел моделей (Порноактёры)

## Введение

Данный документ описывает требования к реализации публичного раздела моделей (порноактёров) на платформе RexTube. Раздел позволит пользователям просматривать профили моделей, подписываться на них, ставить лайки/дизлайки и просматривать видео с их участием. Сущность `ModelProfile` уже существует в системе с базовыми полями, требуется расширить функциональность и создать публичный интерфейс.

## Глоссарий

- **Модель (Model)**: Порноактёр/актриса, профиль которого хранится в сущности `ModelProfile`
- **Подписка на модель (Model Subscription)**: Связь между пользователем и моделью, позволяющая отслеживать новые видео
- **Лайк модели (Model Like)**: Оценка профиля модели пользователем (нравится/не нравится)
- **Система**: Платформа RexTube

## Требования

### Требование 1: Просмотр списка моделей

**User Story:** Как посетитель сайта, я хочу просматривать список всех моделей, чтобы найти интересующих меня актёров.

#### Критерии приёмки

1. WHEN пользователь переходит на страницу `/models` THEN система SHALL отобразить сетку карточек моделей с пагинацией
2. WHEN отображается карточка модели THEN система SHALL показать аватар, имя, количество видео, количество подписчиков и количество просмотров
3. WHEN пользователь выбирает сортировку (популярные, новые, по алфавиту, по количеству видео) THEN система SHALL отсортировать список моделей согласно выбранному критерию
4. WHEN пользователь вводит поисковый запрос THEN система SHALL отфильтровать модели по имени
5. WHEN пользователь выбирает фильтр по полу THEN система SHALL отобразить только модели выбранного пола

### Требование 2: Просмотр профиля модели

**User Story:** Как посетитель сайта, я хочу просматривать детальный профиль модели, чтобы узнать информацию о ней и посмотреть её видео.

#### Критерии приёмки

1. WHEN пользователь переходит на страницу `/models/{slug}` THEN система SHALL отобразить полный профиль модели
2. WHEN отображается профиль модели THEN система SHALL показать следующие поля: пол, возраст, дата рождения, страна, этничность, начало карьеры, знак зодиака, цвет волос, цвет глаз, татуировки, пирсинг, формы (размер груди), рост, вес, дата добавления профиля
3. WHEN отображается профиль модели THEN система SHALL показать статистику: количество просмотров, количество подписчиков, количество видео, количество лайков
4. WHEN отображается профиль модели THEN система SHALL показать сетку видео с участием данной модели с пагинацией
5. WHEN модель имеет обложку профиля THEN система SHALL отобразить её в шапке страницы
6. WHEN модель имеет биографию THEN система SHALL отобразить её в блоке описания

### Требование 3: Подписка на модель

**User Story:** Как авторизованный пользователь, я хочу подписываться на моделей, чтобы следить за их новыми видео.

#### Критерии приёмки

1. WHEN авторизованный пользователь нажимает кнопку "Подписаться" на странице модели THEN система SHALL создать подписку и увеличить счётчик подписчиков модели на 1
2. WHEN авторизованный пользователь нажимает кнопку "Отписаться" THEN система SHALL удалить подписку и уменьшить счётчик подписчиков модели на 1
3. WHEN неавторизованный пользователь нажимает кнопку "Подписаться" THEN система SHALL перенаправить его на страницу входа
4. WHEN пользователь уже подписан на модель THEN система SHALL отобразить кнопку "Отписаться" вместо "Подписаться"
5. WHEN подписка изменяется THEN система SHALL обновить кнопку через HTMX без перезагрузки страницы

### Требование 4: Оценка модели (лайки/дизлайки)

**User Story:** Как авторизованный пользователь, я хочу ставить лайки и дизлайки моделям, чтобы выразить своё отношение.

#### Критерии приёмки

1. WHEN авторизованный пользователь нажимает кнопку "Нравится" THEN система SHALL создать лайк и увеличить счётчик лайков модели на 1
2. WHEN авторизованный пользователь нажимает кнопку "Не нравится" THEN система SHALL создать дизлайк и увеличить счётчик дизлайков модели на 1
3. WHEN пользователь меняет оценку с лайка на дизлайк THEN система SHALL обновить счётчики соответственно
4. WHEN пользователь повторно нажимает на свою текущую оценку THEN система SHALL удалить оценку и уменьшить соответствующий счётчик
5. WHEN неавторизованный пользователь пытается поставить оценку THEN система SHALL перенаправить его на страницу входа
6. WHEN оценка изменяется THEN система SHALL обновить кнопки и счётчики через HTMX без перезагрузки страницы

### Требование 5: Подсчёт просмотров профиля модели

**User Story:** Как владелец платформы, я хочу отслеживать просмотры профилей моделей, чтобы понимать их популярность.

#### Критерии приёмки

1. WHEN пользователь открывает страницу профиля модели THEN система SHALL увеличить счётчик просмотров модели на 1
2. WHEN один и тот же пользователь повторно открывает профиль в течение сессии THEN система SHALL НЕ увеличивать счётчик просмотров
3. WHEN отображается профиль модели THEN система SHALL показать общее количество просмотров

### Требование 6: Расширение админ-панели для моделей

**User Story:** Как администратор, я хочу управлять всеми полями профиля модели, чтобы поддерживать актуальную информацию.

#### Критерии приёмки

1. WHEN администратор редактирует модель THEN система SHALL предоставить форму со всеми полями профиля: имя, slug, биография, аватар, обложка, пол, возраст, дата рождения, страна, этничность, начало карьеры, цвет волос, цвет глаз, татуировки, пирсинг, размер груди, рост, вес, статусы (верифицирован, активен, премиум)
2. WHEN администратор загружает аватар или обложку THEN система SHALL сохранить изображение и обновить соответствующее поле
3. WHEN администратор создаёт новую модель без slug THEN система SHALL автоматически сгенерировать slug из имени
4. WHEN администратор сохраняет модель THEN система SHALL обновить поле updatedAt

### Требование 7: Интеграция моделей с видео

**User Story:** Как администратор, я хочу привязывать моделей к видео, чтобы пользователи могли находить видео по актёрам.

#### Критерии приёмки

1. WHEN администратор редактирует видео THEN система SHALL предоставить возможность выбрать одну или несколько моделей-участников
2. WHEN модель привязывается к видео THEN система SHALL увеличить счётчик видео модели на 1
3. WHEN модель отвязывается от видео THEN система SHALL уменьшить счётчик видео модели на 1
4. WHEN отображается карточка видео THEN система SHALL показать список моделей-участников с ссылками на их профили

### Требование 8: Навигация и SEO

**User Story:** Как посетитель сайта, я хочу легко находить раздел моделей и иметь возможность делиться ссылками на профили.

#### Критерии приёмки

1. WHEN пользователь находится на любой странице сайта THEN система SHALL отображать ссылку на раздел моделей в главном меню
2. WHEN отображается страница профиля модели THEN система SHALL установить корректные meta-теги (title, description) для SEO
3. WHEN отображается страница списка моделей THEN система SHALL установить корректные meta-теги для SEO
4. WHEN модель имеет аватар THEN система SHALL использовать его в Open Graph тегах для социальных сетей
