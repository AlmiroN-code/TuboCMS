# Система публикации постов

## Обзор

Создана полнофункциональная система публикации постов для RexTube с поддержкой:

- Иерархических постов (родительские/дочерние)
- Категоризации постов
- SEO оптимизации
- Загрузки изображений
- Админ-панели управления

## Структура URL

### Посты с категориями
- `/post_category/{slug}` - страница категории постов
- Пример: `/post_category/news` - все посты в категории "Новости"

### Посты без категории (страницы)
- `/{slug}` - отдельная страница/пост
- Пример: `/about` - страница "О нас"

### Вложенные посты
- `/{parent_slug}/{child_slug}` - дочерний пост
- Пример: `/info/about` - страница "О нас" внутри раздела "Информация"

## Админ-панель

### Доступ
- URL: `/admin/posts` - управление постами
- URL: `/admin/post-categories` - управление категориями

### Новая секция в сайдбаре
Добавлена секция "Posts" под секцией "Video" с пунктами:
- Posts - управление постами
- Post Categories - управление категориями

## Функции постов

### Основные поля
- **Заголовок** - название поста
- **Slug** - URL-адрес (автоматически из заголовка)
- **Содержимое** - основной текст (поддерживает HTML)
- **Краткое описание** - для превью и SEO
- **Статус** - черновик/опубликован
- **Изображение** - главное изображение поста
- **Родительский пост** - для создания иерархии
- **Категории** - множественный выбор
- **Порядок сортировки** - для упорядочивания

### SEO настройки
- Meta Title
- Meta Description  
- Meta Keywords

## Функции категорий

### Основные поля
- **Название** - название категории
- **Slug** - URL-адрес
- **Описание** - описание категории
- **Изображение** - изображение категории
- **Порядок сортировки**
- **Активность** - включена/выключена

### SEO настройки
- Meta Title
- Meta Description
- Meta Keywords

## Публичные страницы

### Список всех постов
- URL: `/posts`
- Отображает все опубликованные посты с пагинацией

### Страница категории
- URL: `/post_category/{slug}`
- Отображает посты конкретной категории

### Отдельный пост
- URL: `/{slug}` или `/{parent}/{child}`
- Отображает содержимое поста
- Показывает дочерние посты если есть
- Навигация к родительскому посту

## Примеры использования

### Информационные страницы
1. Создать пост без категории со slug "about" → доступен по `/about`
2. Создать пост без категории со slug "contact" → доступен по `/contact`

### Иерархические страницы
1. Создать родительский пост "info" → `/info`
2. Создать дочерний пост "about" с родителем "info" → `/info/about`
3. Создать дочерний пост "team" с родителем "info" → `/info/team`

### Категоризированные посты
1. Создать категорию "news"
2. Создать посты и назначить им категорию "news"
3. Посты будут доступны на `/post_category/news`

## База данных

Созданы таблицы:
- `posts` - основная таблица постов
- `post_categories` - категории постов  
- `post_post_category` - связь многие-ко-многим

## Файлы системы

### Сущности
- `src/Entity/Post.php`
- `src/Entity/PostCategory.php`

### Репозитории
- `src/Repository/PostRepository.php`
- `src/Repository/PostCategoryRepository.php`

### Контроллеры
- `src/Controller/Admin/AdminPostController.php`
- `src/Controller/Admin/AdminPostCategoryController.php`
- `src/Controller/PostController.php`

### Шаблоны админки
- `templates/admin/posts/`
- `templates/admin/post_categories/`

### Публичные шаблоны
- `templates/post/`

### Миграция
- `migrations/Version20260123210856.php`

## Настройки

### Загрузка изображений
- Папка: `public/media/posts/`
- Поддерживаемые форматы: JPG, PNG, GIF
- Автоматическое переименование файлов

### Пагинация
Использует настройку "Видео на странице" из админ-панели для определения количества постов на странице.

Система готова к использованию!